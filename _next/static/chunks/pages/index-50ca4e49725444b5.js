(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(5261)}])},1722:function(e,t,s){"use strict";s.d(t,{_8:function(){return n},eU:function(){return l},kI:function(){return r}});let n={1:"シェケナダム",2:"アラマキ砦",6:"難破船ドン・ブラコ",7:"ムニ・エール海洋発電所",101:"スメーシーワールド",102:"海女美術大学"},l=["バクダン","カタパッド","テッパン","ヘビ","タワー","モグラ","コウモリ","ハシラ","ダイバー","テッキュウ","ナベブタ","キンシャケ","ドロシャケ","グリル",""],r=["かけだし","はんにんまえ","いちにんまえ","じゅくれん","たつじん","たつじん+1","たつじん+2","たつじん+3","でんせつ"]},9805:function(e,t,s){"use strict";s.d(t,{P:function(){return l},x:function(){return r}});var n=s(8800);let l=(e,t)=>e.map((e,s)=>e+t[s]),r=e=>{let t=(0,n.d)("2001-01-01 09:00");return t.add(e,"seconds")}},5261:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var n=s(5893),l=s(9008),r=s.n(l),a=s(7294),i=s(5712),o=s(3623),u=s(1085),c=s(4846),d=s(3834),j=s(1722),f=s(9077),h=s(5927),x=s(5152),b=s.n(x),m=s(9695),C=s.n(m);let g=b()(async()=>await (await Promise.all([s.e(10),s.e(422)]).then(s.bind(s,6422))).GradePointChart,{loadableGenerated:{webpack:()=>[6422]},ssr:!1}),p=e=>{if(!e.statistic)return(0,n.jsx)(n.Fragment,{});let t=e.statistic.result.length,s=e.statistic.result.filter(e=>e.jobResult.isClear).length,l=e.statistic.result.filter(e=>"isBossDefeated"in e.jobResult),r=l.length,a=l.filter(e=>e.jobResult.isBossDefeated).length,i=e.statistic.result.map(e=>({name:e.playTime,gradePoint:e.gradePoint,grade:j.kI[e.grade],value:100*e.grade+e.gradePoint})),o=e.statistic.result.map(e=>"isBossDefeated"in e.jobResult?4:e.jobResult.isClear?3:e.jobResult.failureWave?e.jobResult.failureWave:0).reduce((e,t)=>e+1e5*t,0);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g,{graphData:i}),(0,n.jsxs)(f.Z.Group,{size:"mini",children:[(0,n.jsx)(f.Z,{label:"総バイト数",value:t}),(0,n.jsx)(f.Z,{label:"バイトクリア数（クリア率）",value:"".concat(s,"(").concat(Math.round(s/t*100),"%)")}),(0,n.jsx)(f.Z,{label:"ヨコヅナバイト数",value:r}),(0,n.jsx)(f.Z,{label:"ヨコヅナクリア数（クリア率）",value:"".concat(a,"(").concat(Math.round(a/r*100),"%)")}),(0,n.jsx)(f.Z,{label:"プレイ時間",value:C()(o,{language:"ja",delimiter:""})})]}),(0,n.jsxs)(h.Z,{striped:!0,children:[(0,n.jsx)(h.Z.Header,{children:(0,n.jsxs)(h.Z.Row,{children:[(0,n.jsx)(h.Z.HeaderCell,{children:"種別"}),(0,n.jsx)(h.Z.HeaderCell,{children:"あなたの討伐数"}),(0,n.jsx)(h.Z.HeaderCell,{children:"あなたの討伐率"}),(0,n.jsx)(h.Z.HeaderCell,{children:"なかまの討伐数"}),(0,n.jsx)(h.Z.HeaderCell,{children:"なかまの討伐率"}),(0,n.jsx)(h.Z.HeaderCell,{children:"出現数"}),(0,n.jsx)(h.Z.HeaderCell,{children:"討伐率"})]})}),(0,n.jsx)(h.Z.Body,{children:j.eU.map((t,s)=>{if(0===e.statistic.bossCounts[s])return;let{statistic:l}=e,r=l.bossCounts[s],a=l.bossKillCounts[s],i=Math.floor(a/r*100),o=l.bossKillCountsByTeam[s],u=Math.floor((o-a)/3/r*100);return(0,n.jsxs)(h.Z.Row,{children:[(0,n.jsx)(h.Z.Cell,{content:t}),(0,n.jsx)(h.Z.Cell,{content:a}),(0,n.jsx)(h.Z.Cell,{className:u<=i?"text-green":"text-red",content:"".concat(i,"%")}),(0,n.jsx)(h.Z.Cell,{content:o-a}),(0,n.jsx)(h.Z.Cell,{className:u<=i?"text-red":"text-green",content:"".concat(u,"%")}),(0,n.jsx)(h.Z.Cell,{content:r}),(0,n.jsx)(h.Z.Cell,{content:"".concat(Math.floor(o/r*100),"%")})]},t)})})]})]})};var y=s(1120),_=s.n(y),Z=s(967);let v=e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Z.Z,{primary:!0,...e,onClick:()=>{e.targetRef&&e.targetRef.current&&_()(e.targetRef.current,{x:-50,y:-50,width:e.targetRef.current.clientWidth+100,height:e.targetRef.current.clientHeight+100}).then(t=>{let s=document.createElement("a");s.href=t.toDataURL(),s.download=e.filename,document.body.append(s),s.click(),document.body.removeChild(s)})}})});var R=s(9805);function w(){let[e,t]=(0,a.useState)({}),[s,l]=(0,a.useState)(""),f=(0,a.useRef)(null),h=e=>{let s=e.target.files;s&&Array.from(s).map(e=>{if("application/json"!==e.type)return;let s=new FileReader;s.onload=()=>{if("string"!=typeof s.result)return;let e=JSON.parse(s.result),n=e.reduce((e,t)=>{let s=j._8[t.schedule.stage_id],n="YYYY年MM月DD日HH:mm",l=(0,R.x)(t.schedule.start_time),r=(0,R.x)(t.schedule.end_time),a="".concat(s," (").concat(l.format(n),"-").concat(r.format(n),")"),i=e[a];return i.result.push({playTime:t.play_time,grade:t.players[0].grade,gradePoint:t.players[0].grade_point,jobResult:{isClear:t.job_result.is_clear,...void 0!==t.job_result.is_boss_defeated?{isBossDefeated:t.job_result.is_boss_defeated}:{},...void 0!==t.job_result.failure_wave?{failureWave:t.job_result.failure_wave}:{}}}),i.bossCounts=i.bossCounts.map((e,s)=>e+t.boss_counts[s]),i.bossKillCounts=i.bossKillCounts.map((e,s)=>e+t.players[0].boss_kill_counts[s]),i.bossKillCountsByTeam=(0,R.P)(i.bossKillCountsByTeam,t.boss_kill_counts),e[a]=i,e},new Proxy({},{get:(e,t)=>t in e?e[t]:{bossKillCounts:Array(15).fill(0),bossKillCountsByTeam:Array(15).fill(0),bossCounts:Array(15).fill(0),result:[]}}));t(n)},s.readAsText(e)})},x=Object.keys(e).reduce((t,s)=>{let n=e[s];return t.bossCounts=(0,R.P)(n.bossCounts,t.bossCounts),t.bossKillCounts=(0,R.P)(n.bossKillCounts,t.bossKillCounts),t.bossKillCountsByTeam=(0,R.P)(n.bossKillCountsByTeam,t.bossKillCountsByTeam),t},{bossKillCounts:Array(15).fill(0),bossKillCountsByTeam:Array(15).fill(0),bossCounts:Array(15).fill(0)});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"SR3 Viewer"}),(0,n.jsx)("meta",{name:"description",content:"Splatoon3 のサーモンランのデータ可視化サイト"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("main",{children:(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(o.Z,{as:"h1",dividing:!0,children:"データ読み込み"}),"Salmonia3+ の「マイページ」 -> 「バックアップ」から出力した json ファイルを選択してください。",(0,n.jsx)("br",{}),(0,n.jsx)("input",{type:"file",onChange:h}),(0,n.jsx)(o.Z,{as:"h1",dividing:!0,children:"リザルト"}),(0,n.jsx)(v,{targetRef:f,content:"スクリーンショットを保存",filename:"sr3-result.png"}),(0,n.jsx)(u.R,{innerRef:f,children:(0,n.jsx)(c.Z,{menu:{secondary:!0,pointing:!0},panes:[{menuItem:"累計",render:()=>(0,n.jsx)(p,{statistic:{...x,result:Object.keys(e).reduce((t,s)=>t.concat(e[s].result),[])}})},{menuItem:"スケジュール",render:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{placeholder:"バイトスケジュール",fluid:!0,selection:!0,search:!0,options:Object.keys(e).reverse().map(e=>({text:e,value:e,key:e})),onChange:(e,t)=>l(t.value.toString())}),(0,n.jsx)(p,{statistic:e[s]})]})}]})})]})})]})}}},function(e){e.O(0,[443,233,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);
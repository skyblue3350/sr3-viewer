(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2047)}])},1722:function(e,s,t){"use strict";t.d(s,{_8:function(){return l},eU:function(){return n},kI:function(){return r}});let l=["","シェケナダム","アラマキ砦","","","","難破船ドン・ブラコ","ムニ・エール海洋発電所"],n=["バクダン","カタパッド","テッパン","ヘビ","タワー","モグラ","コウモリ","ハシラ","ダイバー","テッキュウ","ナベブタ","キンシャケ","ドロシャケ","グリル",""],r=["かけだし","はんにんまえ","いちにんまえ","じゅくれん","たつじん","たつじん+1","たつじん+2","たつじん+3","でんせつ"]},9805:function(e,s,t){"use strict";t.d(s,{P:function(){return n},x:function(){return r}});var l=t(8800);let n=(e,s)=>e.map((e,t)=>e+s[t]),r=e=>{let s=(0,l.d)("2001-01-01 09:00");return s.add(e,"seconds")}},2047:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var l=t(5893),n=t(9008),r=t.n(n),a=t(7294),i=t(5712),o=t(3623),u=t(4846),c=t(3834),d=t(1722),j=t(9077),b=t(5927),x=t(5152),f=t.n(x),h=t(9695),m=t.n(h);let C=f()(async()=>await (await Promise.all([t.e(784),t.e(422)]).then(t.bind(t,6422))).GradePointChart,{loadableGenerated:{webpack:()=>[6422]},ssr:!1}),p=e=>{if(!e.statistic)return(0,l.jsx)(l.Fragment,{});let s=e.statistic.result.length,t=e.statistic.result.filter(e=>e.jobResult.isClear).length,n=e.statistic.result.filter(e=>"isBossDefeated"in e.jobResult),r=n.length,a=n.filter(e=>e.jobResult.isBossDefeated).length,i=e.statistic.result.map(e=>({name:e.playTime,gradePoint:e.gradePoint,grade:d.kI[e.grade],value:100*e.grade+e.gradePoint})),o=e.statistic.result.map(e=>"isBossDefeated"in e.jobResult?4:e.jobResult.isClear?3:e.jobResult.failureWave?e.jobResult.failureWave:0).reduce((e,s)=>e+1e5*s,0);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C,{graphData:i}),(0,l.jsxs)(j.Z.Group,{size:"mini",children:[(0,l.jsx)(j.Z,{label:"総バイト数",value:s}),(0,l.jsx)(j.Z,{label:"バイトクリア数（クリア率）",value:"".concat(t,"(").concat(Math.round(t/s*100),"%)")}),(0,l.jsx)(j.Z,{label:"ヨコヅナバイト数",value:r}),(0,l.jsx)(j.Z,{label:"ヨコヅナクリア数（クリア率）",value:"".concat(a,"(").concat(Math.round(a/r*100),"%)")}),(0,l.jsx)(j.Z,{label:"プレイ時間",value:m()(o,{language:"ja",delimiter:""})})]}),(0,l.jsxs)(b.Z,{striped:!0,children:[(0,l.jsx)(b.Z.Header,{children:(0,l.jsxs)(b.Z.Row,{children:[(0,l.jsx)(b.Z.HeaderCell,{children:"種別"}),(0,l.jsx)(b.Z.HeaderCell,{children:"あなたの討伐数"}),(0,l.jsx)(b.Z.HeaderCell,{children:"あなたの討伐率"}),(0,l.jsx)(b.Z.HeaderCell,{children:"なかまの討伐数"}),(0,l.jsx)(b.Z.HeaderCell,{children:"なかまの討伐率"}),(0,l.jsx)(b.Z.HeaderCell,{children:"出現数"}),(0,l.jsx)(b.Z.HeaderCell,{children:"討伐率"})]})}),(0,l.jsx)(b.Z.Body,{children:d.eU.map((s,t)=>{if(0===e.statistic.bossCounts[t])return;let{statistic:n}=e,r=n.bossCounts[t],a=n.bossKillCounts[t],i=Math.floor(a/r*100),o=n.bossKillCountsByTeam[t],u=Math.floor((o-a)/3/r*100);return(0,l.jsxs)(b.Z.Row,{children:[(0,l.jsx)(b.Z.Cell,{content:s}),(0,l.jsx)(b.Z.Cell,{content:a}),(0,l.jsx)(b.Z.Cell,{className:u<=i?"text-green":"text-red",content:"".concat(i,"%")}),(0,l.jsx)(b.Z.Cell,{content:o-a}),(0,l.jsx)(b.Z.Cell,{className:u<=i?"text-red":"text-green",content:"".concat(u,"%")}),(0,l.jsx)(b.Z.Cell,{content:r}),(0,l.jsx)(b.Z.Cell,{content:"".concat(Math.floor(o/r*100),"%")})]},s)})})]})]})};var _=t(9805);function g(){let[e,s]=(0,a.useState)({}),[t,n]=(0,a.useState)(""),j=e=>{let t=e.target.files;t&&Array.from(t).map(e=>{if("application/json"!==e.type)return;let t=new FileReader;t.onload=()=>{if("string"!=typeof t.result)return;let e=JSON.parse(t.result),l=e.reduce((e,s)=>{let t=d._8[s.schedule.stage_id],l="YYYY年MM月DD日HH:mm",n=(0,_.x)(s.schedule.start_time),r=(0,_.x)(s.schedule.end_time),a="".concat(t," (").concat(n.format(l),"-").concat(r.format(l),")"),i=e[a];return i.result.push({playTime:s.play_time,grade:s.players[0].grade,gradePoint:s.players[0].grade_point,jobResult:{isClear:s.job_result.is_clear,...void 0!==s.job_result.is_boss_defeated?{isBossDefeated:s.job_result.is_boss_defeated}:{},...void 0!==s.job_result.failure_wave?{failureWave:s.job_result.failure_wave}:{}}}),i.bossCounts=i.bossCounts.map((e,t)=>e+s.boss_counts[t]),i.bossKillCounts=i.bossKillCounts.map((e,t)=>e+s.players[0].boss_kill_counts[t]),i.bossKillCountsByTeam=(0,_.P)(i.bossKillCountsByTeam,s.boss_kill_counts),e[a]=i,e},new Proxy({},{get:(e,s)=>s in e?e[s]:{bossKillCounts:Array(15).fill(0),bossKillCountsByTeam:Array(15).fill(0),bossCounts:Array(15).fill(0),result:[]}}));s(l)},t.readAsText(e)})},b=Object.keys(e).reduce((s,t)=>{let l=e[t];return s.bossCounts=(0,_.P)(l.bossCounts,s.bossCounts),s.bossKillCounts=(0,_.P)(l.bossKillCounts,s.bossKillCounts),s.bossKillCountsByTeam=(0,_.P)(l.bossKillCountsByTeam,s.bossKillCountsByTeam),s},{bossKillCounts:Array(15).fill(0),bossKillCountsByTeam:Array(15).fill(0),bossCounts:Array(15).fill(0)});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r(),{children:[(0,l.jsx)("title",{children:"SR3 Viewer"}),(0,l.jsx)("meta",{name:"description",content:"Splatoon3 のサーモンランのデータ可視化サイト"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsx)("main",{children:(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(o.Z,{as:"h1",dividing:!0,children:"データ読み込み"}),"Salmonia3+ の「マイページ」 -> 「バックアップ」から出力した json ファイルを選択してください。",(0,l.jsx)("br",{}),(0,l.jsx)("input",{type:"file",onChange:j}),(0,l.jsx)(o.Z,{as:"h1",dividing:!0,children:"リザルト"}),(0,l.jsx)(u.Z,{menu:{secondary:!0,pointing:!0},panes:[{menuItem:"累計",render:()=>(0,l.jsx)(p,{statistic:{...b,result:Object.keys(e).reduce((s,t)=>s.concat(e[t].result),[])}})},{menuItem:"スケジュール",render:()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{placeholder:"バイトスケジュール",fluid:!0,selection:!0,search:!0,options:Object.keys(e).reverse().map(e=>({text:e,value:e,key:e})),onChange:(e,s)=>n(s.value.toString())}),(0,l.jsx)(p,{statistic:e[t]})]})}]})]})})]})}}},function(e){e.O(0,[575,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);